
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Cookie相关总结 | GCidea&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Gao Chang">
    

    
    <meta name="description" content="前言　　本篇简单总结cookie的概念，作用，应用，实现案例等要点，关于大段的介绍，就不再重复了，网上有很多可以参考。而且cookie相关是一个很大的话题，这里只是简单小结，主要包括：　　1.cookie相关介绍　　2.cookie安全性问题　　3.javascript对cookie的操作与使用　　4.cookie与session的对比分析　　5.cookie在实际开发中的使用

直观感受　　co">
<meta property="og:type" content="article">
<meta property="og:title" content="Cookie相关总结">
<meta property="og:url" content="http://yoursite.com/2016/05/27/cookie/index.html">
<meta property="og:site_name" content="GCidea's blog">
<meta property="og:description" content="前言　　本篇简单总结cookie的概念，作用，应用，实现案例等要点，关于大段的介绍，就不再重复了，网上有很多可以参考。而且cookie相关是一个很大的话题，这里只是简单小结，主要包括：　　1.cookie相关介绍　　2.cookie安全性问题　　3.javascript对cookie的操作与使用　　4.cookie与session的对比分析　　5.cookie在实际开发中的使用

直观感受　　co">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/local-cookie-file.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-plugin.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-example.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/setcookie.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-1.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-2.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-3.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/setcookieapi.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/setcookiefalse.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/setcookietrue.png">
<meta property="og:updated_time" content="2016-06-14T15:24:26.444Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cookie相关总结">
<meta name="twitter:description" content="前言　　本篇简单总结cookie的概念，作用，应用，实现案例等要点，关于大段的介绍，就不再重复了，网上有很多可以参考。而且cookie相关是一个很大的话题，这里只是简单小结，主要包括：　　1.cookie相关介绍　　2.cookie安全性问题　　3.javascript对cookie的操作与使用　　4.cookie与session的对比分析　　5.cookie在实际开发中的使用

直观感受　　co">
<meta name="twitter:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/local-cookie-file.png">

    
    
    <link rel="icon" href="/img/author.png">
    
    
    <link rel="apple-touch-icon" href="/img/author.png">
    <link rel="apple-touch-icon-precomposed" href="/img/author.png">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/author.png" alt="GCidea&#39;s blog" title="GCidea&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="GCidea&#39;s blog">GCidea&#39;s blog</a></h1>
				<h2 class="blog-motto">gaochang | BUPT</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页 | Home</a></li>
					
						<li><a href="/archives">归档 | Archives</a></li>
					
						<li><a href="/categories">分类 | Categories</a></li>
					
						<li><a href="/about">简介 | About</a></li>
					
					<!--<li>
 					

					
					</li>-->
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/05/27/cookie/" title="Cookie相关总结" itemprop="url">Cookie相关总结</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Gao Chang" target="_blank" itemprop="author">Gao Chang</a>
		
  <p class="article-time">
    <time datetime="2016-05-27T09:35:08.000Z" itemprop="datePublished"> 发表于 2016-05-27</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#直观感受"><span class="toc-number">2.</span> <span class="toc-text">直观感受</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie相关介绍"><span class="toc-number">3.</span> <span class="toc-text">cookie相关介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义"><span class="toc-number">3.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标准"><span class="toc-number">3.2.</span> <span class="toc-text">标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编码"><span class="toc-number">3.3.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性"><span class="toc-number">3.4.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类"><span class="toc-number">3.5.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#限制"><span class="toc-number">3.6.</span> <span class="toc-text">限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传输"><span class="toc-number">3.7.</span> <span class="toc-text">传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例"><span class="toc-number">3.8.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改"><span class="toc-number">3.9.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用"><span class="toc-number">3.10.</span> <span class="toc-text">作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">3.11.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie安全性问题"><span class="toc-number">4.</span> <span class="toc-text">cookie安全性问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#httpOnly"><span class="toc-number">4.1.</span> <span class="toc-text">httpOnly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript对cookie的操作与使用"><span class="toc-number">5.</span> <span class="toc-text">JavaScript对cookie的操作与使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#应用场景"><span class="toc-number">5.1.</span> <span class="toc-text">应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS设置cookie"><span class="toc-number">5.2.</span> <span class="toc-text">JS设置cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS获取cookie"><span class="toc-number">5.3.</span> <span class="toc-text">JS获取cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS删除cookie"><span class="toc-number">5.4.</span> <span class="toc-text">JS删除cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS检查cookie"><span class="toc-number">5.5.</span> <span class="toc-text">JS检查cookie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie与session的对比分析"><span class="toc-number">6.</span> <span class="toc-text">cookie与session的对比分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie在实际开发中的使用"><span class="toc-number">7.</span> <span class="toc-text">cookie在实际开发中的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">8.</span> <span class="toc-text">总结</span></a></li></ol>
		
		</div>
		
		<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>　　本篇简单总结cookie的概念，作用，应用，实现案例等要点，关于大段的介绍，就不再重复了，网上有很多可以参考。而且cookie相关是一个很大的话题，这里只是简单小结，主要包括：<br>　　1.cookie相关介绍<br>　　2.cookie安全性问题<br>　　3.javascript对cookie的操作与使用<br>　　4.cookie与session的对比分析<br>　　5.cookie在实际开发中的使用</p>
<hr>
<h2 id="直观感受"><a href="#直观感受" class="headerlink" title="直观感受"></a>直观感受</h2><p>　　cookie是一种存储在用户本地的数据。比如在windows系统中使用chrome浏览器访问网站，相应的数据将保存在如下目录：<br>  <code>C:\Users\gaochang\AppData\Local\Google\Chrome\User Data\Default</code><br>  如图所示：<br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/local-cookie-file.png" alt=""></p>
<p>  我们可以用一些第三方工具查看这个文件内容，比如chrome浏览器的一款插件cookies：<br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-plugin.png" alt=""></p>
<p>  我们也可以在具体访问某个网站时，点击URL左边的“纸张/锁”图标，显示当前网站的cookie信息：<br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-example.png" alt=""></p>
<hr>
<h2 id="cookie相关介绍"><a href="#cookie相关介绍" class="headerlink" title="cookie相关介绍"></a>cookie相关介绍</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>　　Cookie是由服务器端生成的，当用户访问服务器后，发送给User-Agent（一般指浏览器），浏览器会将Cookie的key/value保存到某个目录下的文本文件内，下次请求同一网站时就发送该Cookie给服务器（前提是浏览器设置为启用cookie）。Cookie名称和值可以由服务器端在开发过程中自己定义，通过cookie服务器可以知道该用户是否是合法用户以及是否需要重新登录等，服务器可以设置或读取Cookies中包含信息，借此维护用户跟服务器会话中的状态。</p>
<h3 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h3><p>　　cookie的规格标准文档主要有以下4种：<br>  1.由网景公司颁布的规格标准<br>  　　网景通信公司设计开发了cookie，并制定了相关的规格标准。1994年前后，cookie正式应用在网景浏览器中。目前最为普及的cookie方式也是以此为准的。<br>  2.RFC2109<br>  　　原本是想和网景公司的标准交互应用，可惜发生了微妙的差异。该标准现在已经淡出视线。<br>  3.RFC2965<br>  　　为终结IE浏览器与Netscape Navigator的标准差异而导致的浏览器战争，该标准定义了新的HTTP首部Set-Cookie2和Cookie2。可事实上，并未投入大量使用。<br>  4.RFC6265<br>  　　将网景公司制定的标准作为业界事实标准，重新定义cookie标准后的产物。</p>
<p>　目前使用最广泛的cookie标准并不是上述中的某一个，而是在网景公司制定的标准上进行扩展后的产物。</p>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p>　　Cookies的值中可以保存除了“;”以外的标点符号。但是不能保存汉字。否则会出现乱码。所以对于Cookies中的内容要进行统一的编码和解码。为了在浏览器端和服务器端都能够进行解码和编码，可统一使用UTF-8编码格式。<br>　　javacript提供了内置的编码和解码函数，用来将非英文的字符编码或者解码。编码函数为“escape”,使用语法如下<br><code>codedString=escape(originalString);</code><br>其作用为，将参数字符串“originalString”中的特殊字符(绝大多数的非英文字母、非数字的字符)替换为”%”加上该字符Unicode编码的两位十六进制字符，或者“%u”加上该字符unicode编码的4位十六进制字符(视该字符的编码而定);<br>　　函数“un escape”与“escape”相反，用于将“escape”编码后的字符串还原为原始的字符串，其语法如下：<br><code>originalString=unescape(codedString);</code></p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>cookie主要的属性有：<br>　(1)<code>name</code>:Cookie名称，Cookie名称必须，一般用字母及数字，不能包含特殊字符，如有特殊字符需要转码。如js操作cookie的时候可以使用escape()对名称转码。</p>
<p>　(2)<code>value</code>:Cookie值，Cookie值同理Cookie的名称，可以进行转码和加密。</p>
<p>　(3)<code>expire</code>:过期日期，一个GMT格式的时间，当过了这个日期之后，浏览器就会将这个Cookie删除掉，当不设置这个的时候，Cookie在浏览器关闭(会话结束)后消失。</p>
<p>　(4)<code>path</code>:一个路径，在这个路径下面的页面才可以访问该Cookie，一般设为“/”，以表示同一个站点的所有页面都可以访问这个Cookie。</p>
<p>　(5)<code>domain</code>:子域，指定在该子域下才可以访问Cookie，例如要让Cookie在a.test.com下可以访问，但在b.test.com下不能访问，则可将domain设置成a.test.com。</p>
<p>　(6)<code>secure</code>:安全性，指定Cookie是否只能通过https协议访问，一般的Cookie使用HTTP协议即可访问，如果设置了secure，则只有当使用https协议连接时cookie才可以被页面访问。</p>
<p>　(7)<code>httpOnly</code>:如果在Cookie中设置了”HttpOnly”属性，那么通过程序(JS脚本、Applet等)将无法读取到Cookie信息。</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>cookie主要可以分为以下两类：</p>
<blockquote>
<p>Session cookies - these are temporary and are erased when you close your browser at the end of your surfing session. The next time you visit that particular site it will not recognise you and will treat you as a completely new visitor as there is nothing in your browser to let the site know that you have visited before.</p>
</blockquote>
<p>会话cookie—这类cookie是短暂性的，是位于客户端所在系统的内存中的，当你的会话结束，关闭浏览器时，这类cookie将会被清空。当你下一次再访问该网站时，服务端并不能识别出你而是将你当做一个全新的用户，因为你的浏览器中没有任何可以让服务端判断你之前访问过的信息。（在设置了Discard参数(该参数是指当客户端程序运行结束时丢弃这个cookie。是RFC2965中新增字段，允许浏览器在退出时，不考虑过期时间，将cookie强制销毁)，或者没有明确设置的expires或Max-Age的情况下，创建的是一个会话cookie。）主要作用：根据名字也容易看出，主要是为了配合服务端session机制对用户进行标识。</p>
<blockquote>
<p>Persistent cookies - these remain on your hard drive until you erase them or they expire. How long a cookie remains on your browser depends on how long the visited website has programmed the cookie to last.</p>
</blockquote>
<p>持久cookie—这类cookie将保存在客户端所在设备的硬盘上（具体位置见本文开头直观感受部分），除非你主动删除它们或者它们过期了。这类cookie能在你的浏览器中保持有效多长时间，取决于你所访问网站为之设定的有效期。主要作用：持久化cookie则主要是进行用户特征的追踪，比如记录用户最初访问时间，用户习惯等。</p>
<h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><p>　　大多数浏览器支持最大为4096字节的 Cookie。浏览器还限制站点可以在用户计算机上存储的Cookie的数量。大多数浏览器只允许每个站点存储20个Cookie；注意这里的20个是指主键值，也就是20条Cookies记录，但是每个Cookies记录还可以包含若干子键。如果试图存储更多Cookie，则最旧的Cookie便会被丢弃。有些浏览器还会对它们将接受的来自所有站点的Cookie总数作出绝对限制，通常为300个。</p>
<h3 id="传输"><a href="#传输" class="headerlink" title="传输"></a>传输</h3><p>　　cookie信息在浏览器（客户端）和服务器端的传递是通过http报文头部来实现的。<br>　　HTTP请求报文的首部字段有“请求首部字段”，“通用首部字段”，“实体首部字段”3种；HTTP响应报文的首部字段有“响应首部字段”，“通用首部字段”，“实体首部字段”3种。具体到这里：为cookie服务的首部字段有：</p>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
<th>首部类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>Set-Cookie</td>
<td>开始状态管理所使用的Cookie信息</td>
<td>响应首部字段</td>
</tr>
<tr>
<td>Cookie</td>
<td>服务器接收到的Cookie信息</td>
<td>请求首部字段</td>
</tr>
</tbody>
</table>
<p>下面具体来看一下两个字段：</p>
<p><b>Set-Cookie</b><br>示例：响应报文中的一段<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/setcookie.png" alt=""></p>
<p>Set-Cookie字段的属性有：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明 </th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME=VALUE</td>
<td>赋予cookie的名称和值</td>
</tr>
<tr>
<td>expires=DATE</td>
<td>cookie的有效期（若不明确指定则默认为浏览器关闭时）</td>
</tr>
<tr>
<td>path=PATH</td>
<td>指明服务器上的哪些文件目录作为cookie的适用对象 </td>
</tr>
<tr>
<td>domain=域名</td>
<td>作为cookie适用对象的域名</td>
</tr>
<tr>
<td>Secure</td>
<td>仅在HTTPS安全通信时才会发送cookie，无具体值，直接指定“secure”即可</td>
</tr>
<tr>
<td>HttpOnly</td>
<td>加以限制，使cookie不能被js等脚本访问，无具体值，直接指定“HttpOnly”即可</td>
</tr>
</tbody>
</table>
<p><b>Cookie</b><br>示例：请求报文中的一段<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie.png" alt=""></p>
<p>首部字段Cookie会告知服务器，当客服端想获得HTTP状态管理支持时，就会在请求头包含从服务器接收到的cookie。</p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>　　下面是《HTTP权威指南》中给出的一个关于“cookie与会话跟踪”的例子：<br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-1.png" alt=""><br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-2.png" alt=""><br>  <img src="http://7xrz3r.com1.z0.glb.clouddn.com/cookie-session-3.png" alt=""></p>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>　　其实cookie是不存在真正意义上的修改、删除操作的。要想修改，只需要在服务端新建一个同名cookie，填入http响应报文覆盖原来的cookie即可；要想删除，则只要在服务端新建一个同名cookie，并且设置maxAge为0，填入http响应报文覆盖原来的cookie即可。</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>　　cookie的作用主要在于“绑定一种状态”，其工作机制是用户识别及状态管理。比如购物网站中，一定时间内可以直接登录，免去输入用户名密码的繁琐；可以根据浏览记录精准推荐感兴趣的商品；正确记录购物车中已有商品等等。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>简单来讲，关于cookie记住3句话：<br>　1.首次由服务端生成，放入set-cookie字段传回给客户端；<br>　2.客户端请求报文首部加入该cookie；<br>　3.服务端识别该cookie，从而确定用户身份。</p>
<hr>
<h2 id="cookie安全性问题"><a href="#cookie安全性问题" class="headerlink" title="cookie安全性问题"></a>cookie安全性问题</h2><p>　　cookie在提供便利的同时，确实存在安全性问题，它可能被非法使用冒充身份。Cookie记录了用户的帐户ID、密码之类的信息，通常使用MD5方法加密后在网上传递。但是，Cookie以纯文本的形式在浏览器和服务器之间传送，很容易被他人非法截获和利用。并且截获者不需要知道这些字符串的含义，只要把别人的Cookie向服务器提交，且能够通过验证，就可以冒充受害人的身份登陆网站，这种行为就叫做Cookie欺骗。</p>
<h3 id="httpOnly"><a href="#httpOnly" class="headerlink" title="httpOnly"></a>httpOnly</h3><p>　　上述cookie属性中的httpOnly是安全性的解决方案之一。设置为true后，JavaScript是无法获取cookie的，可防止XSS（跨站脚本攻击）等。详见如下演示：<br>1.测试程序如下：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Home\Controller;</span><br><span class="line">use Think\Controller;</span><br><span class="line">class IndexController extends Controller &#123;</span><br><span class="line">    public function index()&#123;</span><br><span class="line">        setcookie(&quot;sid&quot;, &quot;this is a cookie test&quot;, NULL, NULL, NULL, NULL, false);</span><br><span class="line">        $this-&gt;display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>根据setcookie()函数的API：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/setcookieapi.png" alt=""><br>此时设置httpOnly的属性为false；客户端应该可以到sid=this is a cookie test这个cookie，验证代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(function()&#123;</span><br><span class="line">        $(&quot;#cookieBtn&quot;).click(function()&#123;</span><br><span class="line">            alert(document.cookie);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>点击“查看cookie信息”按钮，显示结果如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/setcookiefalse.png" alt=""><br>结果符合预期。</p>
<p>现在更改为true，开启httpOnly:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Home\Controller;</span><br><span class="line">use Think\Controller;</span><br><span class="line">class IndexController extends Controller &#123;</span><br><span class="line">    public function index()&#123;</span><br><span class="line">        setcookie(&quot;sid&quot;, &quot;this is a cookie test&quot;, NULL, NULL, NULL, NULL, true);</span><br><span class="line">        $this-&gt;display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>点击“查看cookie信息”按钮，显示结果如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/setcookietrue.png" alt=""><br>可以看出此时已经无法通过JavaScript获取cookie</p>
<p>但是，这种方式也还是有漏洞的，具体参见这篇文章：<a href="http://netsecurity.51cto.com/art/201404/435401.htm" target="_blank" rel="external">http://netsecurity.51cto.com/art/201404/435401.htm</a></p>
<blockquote>
<p>httpOnly作用只是限制从其他非HTTP的API（如JavaScript）访问，cookie还是有可能传递的过程中被监听捕获后信息泄漏。将 HttpOnly 属性设置为 true，并不能防止对网络频道具有访问权限的攻击者直接访问该 Cookie。针对这种情况，应考虑使用安全套接字层 (SSL) 来提供帮助。<br>secure属性是防止信息在传递的过程中被监听捕获后信息泄漏。即：<br><code>setcookie(&quot;sid&quot;, &quot;this is a cookie test&quot;, NULL, NULL, NULL, true, NULL);</code><br>HttpOnly属性的目的是防止程序获取cookie后进行攻击。即：<br><code>setcookie(&quot;sid&quot;, &quot;this is a cookie test&quot;, NULL, NULL, NULL, NULL, true);</code></p>
</blockquote>
<hr>
<h2 id="JavaScript对cookie的操作与使用"><a href="#JavaScript对cookie的操作与使用" class="headerlink" title="JavaScript对cookie的操作与使用"></a>JavaScript对cookie的操作与使用</h2><p>（注：以下内容主要为引用。）</p>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>　　JavaScript是运行在客户端的脚本，因此一般是不能够设置Session的，因为Session是运行在服务器端的。而cookie是运行在客户端的，所以可以用JS来设置cookie。假设有这样一种情况，在某个用例流程中，由A页面跳至B页面，若在A页面中采用JS用变量temp保存了某一变量的值，在B页面的时候，同样需要使用JS来引用temp的变量值，对于JS中的全局变量或者静态变量的生命周期是有限的，当发生页面跳转或者页面关闭的时候，这些变量的值会重新载入，即没有达到保存的效果。解决这个问题的最好的方案是采用cookie(本地文件)来保存该变量的值，那么如何来设置和读取cookie呢？首先需要稍微了解一下cookie的结构，简单地说：cookie是以键值对的形式保存的，即key=value的格式。各个cookie之间一般是以“;”分隔。</p>
<h3 id="JS设置cookie"><a href="#JS设置cookie" class="headerlink" title="JS设置cookie"></a>JS设置cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function setCookie(c_name,value,expiredays)&#123;</span><br><span class="line">    var exdate=new Date();</span><br><span class="line">    exdate.setDate(exdate.getDate()+expiredays);</span><br><span class="line">    document.cookie=c_name+ &quot;=&quot; +escape(value)+((expiredays==null) ? &quot;&quot; : &quot;; expires=&quot;+exdate.toGMTString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JS获取cookie"><a href="#JS获取cookie" class="headerlink" title="JS获取cookie"></a>JS获取cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function getCookie(c_name)&#123;</span><br><span class="line">    if (document.cookie.length&gt;0)&#123; </span><br><span class="line">        c_start=document.cookie.indexOf(c_name + &quot;=&quot;);</span><br><span class="line">        if (c_start!=-1)&#123; </span><br><span class="line">            c_start=c_start + c_name.length+1;</span><br><span class="line">            c_end=document.cookie.indexOf(&quot;;&quot;,c_start);</span><br><span class="line">            if (c_end==-1) &#123;</span><br><span class="line">                c_end=document.cookie.length;</span><br><span class="line">            &#125;</span><br><span class="line">            return unescape(document.cookie.substring(c_start,c_end));</span><br><span class="line">        &#125; </span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return &quot;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JS删除cookie"><a href="#JS删除cookie" class="headerlink" title="JS删除cookie"></a>JS删除cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function delCookie(name)&#123;</span><br><span class="line">    var exp = new Date();</span><br><span class="line">    exp.setTime(exp.getTime() - 1); //删除cookie即设置expires为一个过去的时间</span><br><span class="line">    var cval=getCookie(name);</span><br><span class="line">    if(cval!=null)&#123;</span><br><span class="line">        document.cookie= name + &quot;=&quot;+cval+&quot;;expires=&quot;+exp.toGMTString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JS检查cookie"><a href="#JS检查cookie" class="headerlink" title="JS检查cookie"></a>JS检查cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function checkCookie()</span><br><span class="line">&#123;</span><br><span class="line">    username=getCookie(&apos;username&apos;);</span><br><span class="line">    if (username!=null &amp;&amp; username!=&quot;&quot;)&#123;</span><br><span class="line">        alert(&apos;Welcome again &apos;+username+&apos;!&apos;);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">      username=prompt(&apos;Please enter your name:&apos;,&quot;&quot;);</span><br><span class="line">      if (username!=null &amp;&amp; username!=&quot;&quot;)&#123;</span><br><span class="line">        setCookie(&apos;username&apos;,username,365);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：jQuery库也提供了对cookie操作的封装。具体可参见<a href="http://www.php100.com/html/program/jquery/2013/0905/6028.html" target="_blank" rel="external">http://www.php100.com/html/program/jquery/2013/0905/6028.html</a></p>
</blockquote>
<hr>
<h2 id="cookie与session的对比分析"><a href="#cookie与session的对比分析" class="headerlink" title="cookie与session的对比分析"></a>cookie与session的对比分析</h2><p>　　关于session，则又是一大块内容。具体地将在后面的文章中单独总结。这里仅把一些资料中的对比内容加以总结。</p>
<p>1.Session是服务器端使用的一种记录客户端状态的机制，使用上比Cookie简单一些，相应的也增加了服务器的存储压力。</p>
<p>2.不同的是Cookie保存在客户端浏览器中，而Session保存在服务器上。</p>
<p>3.客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。</p>
<p>4.当多个客户端执行程序时，服务器会保存多个客户端的Session。获取Session的时候也不需要声明获取谁的Session。Session机制决定了当前客户只会获取到自己的Session，而不会获取到别人的Session。各客户的Session也彼此独立，互不可见。</p>
<p>5.cookie和session的共同之处在于：cookie和session都是用来跟踪浏览器用户身份的会话方式。</p>
<p>6.cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗,如果主要考虑到安全应当使用session。</p>
<p>7.可将登陆信息等重要信息存放为session;其他信息如果需要保留，可以放在cookie中。</p>
<p>8.虽然Session保存在服务器，对客户端是透明的，它的正常运行仍然需要客户端浏览器的支持。这是因为Session需要使用Cookie作为识别标志。HTTP协议是无状态的，Session不能依据HTTP连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名称中包含类似“SESSIONID”字样的Cookie，它的值为该Session的id（也就是HttpSession.getId()的返回值）。Session依据该Cookie来识别是否为同一用户。该Cookie为服务器自动生成的，它的maxAge属性一般为–1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效。因此同一机器的两个浏览器窗口访问服务器时，会生成两个不同的Session。但是由浏览器窗口内的链接、脚本等打开的新窗口除外，这类子窗口会共享父窗口的Cookie，因此会共享一个Session。（注意：新开的浏览器窗口会生成新的Session，但子窗口除外。子窗口会共用父窗口的Session。例如，在链接上右击，在弹出的快捷菜单中选择“在新窗口中打开”时，子窗口便可以访问父窗口的Session。）</p>
<p>9.我们知道，客户端浏览器是可以禁用Cookie的（或者可能就不支持Cookie）那么在这种情况下，为了使用session达到相应效果，就要使用另一种技术：URL地址重写。URL地址重写是对客户端不支持Cookie的解决方案。URL地址重写的原理是将该用户Session的id信息重写到URL地址中。服务器能够解析重写后的URL获取Session的id。这样即使客户端不支持Cookie，也可以使用Session来记录用户状态。</p>
<blockquote>
<p>参考：<br><a href="http://www.cnblogs.com/shiyangxt/archive/2008/10/07/1305506.html" target="_blank" rel="external">http://www.cnblogs.com/shiyangxt/archive/2008/10/07/1305506.html</a><br><a href="http://blog.csdn.net/axin66ok/article/details/6175522" target="_blank" rel="external">http://blog.csdn.net/axin66ok/article/details/6175522</a><br><a href="http://blog.csdn.net/fangaoxin/article/details/6952954" target="_blank" rel="external">http://blog.csdn.net/fangaoxin/article/details/6952954</a></p>
</blockquote>
<hr>
<h2 id="cookie在实际开发中的使用"><a href="#cookie在实际开发中的使用" class="headerlink" title="cookie在实际开发中的使用"></a>cookie在实际开发中的使用</h2><p>　　根据上述cookie与session的对比分析可知，实际应用中cookie要配合session使用才能更好保证安全性。因此具体开发中的应用将在<a href="http://gcidea.info/2016/05/08/session/" target="_blank" rel="external">session相关总结</a>一文中一并分析。</p>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>　　cookie相关内容十分丰富，这里只是对目前遇到的一些问题，根据网上已有资料和一些实际经验进行的总结，其中很多点都值得单独展开深入分析。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/HTTP/">HTTP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/Cookie/">Cookie</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/05/27/cookie/" data-title="Cookie相关总结 | GCidea&#39;s blog" data-tsina="2180985772" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/05/30/session/" title="Session相关总结">
  <strong>上一篇：</strong><br/>
  <span>
  Session相关总结</span>
</a>
</div>


<div class="next">
<a href="/2016/05/22/restful-api/"  title="Restful风格API设计小结">
 <strong>下一篇：</strong><br/> 
 <span>Restful风格API设计小结
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#直观感受"><span class="toc-number">2.</span> <span class="toc-text">直观感受</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie相关介绍"><span class="toc-number">3.</span> <span class="toc-text">cookie相关介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义"><span class="toc-number">3.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标准"><span class="toc-number">3.2.</span> <span class="toc-text">标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编码"><span class="toc-number">3.3.</span> <span class="toc-text">编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性"><span class="toc-number">3.4.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类"><span class="toc-number">3.5.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#限制"><span class="toc-number">3.6.</span> <span class="toc-text">限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传输"><span class="toc-number">3.7.</span> <span class="toc-text">传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例"><span class="toc-number">3.8.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改"><span class="toc-number">3.9.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作用"><span class="toc-number">3.10.</span> <span class="toc-text">作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">3.11.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie安全性问题"><span class="toc-number">4.</span> <span class="toc-text">cookie安全性问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#httpOnly"><span class="toc-number">4.1.</span> <span class="toc-text">httpOnly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript对cookie的操作与使用"><span class="toc-number">5.</span> <span class="toc-text">JavaScript对cookie的操作与使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#应用场景"><span class="toc-number">5.1.</span> <span class="toc-text">应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS设置cookie"><span class="toc-number">5.2.</span> <span class="toc-text">JS设置cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS获取cookie"><span class="toc-number">5.3.</span> <span class="toc-text">JS获取cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS删除cookie"><span class="toc-number">5.4.</span> <span class="toc-text">JS删除cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS检查cookie"><span class="toc-number">5.5.</span> <span class="toc-text">JS检查cookie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie与session的对比分析"><span class="toc-number">6.</span> <span class="toc-text">cookie与session的对比分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie在实际开发中的使用"><span class="toc-number">7.</span> <span class="toc-text">cookie在实际开发中的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">8.</span> <span class="toc-text">总结</span></a></li></ol>
 
  </div>

<div id="asidepart">
<!--<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>-->
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="gcidea" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/AngularJs/" title="AngularJs">AngularJs<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/CSS3/" title="CSS3">CSS3<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/FE/" title="FE">FE<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTML/" title="HTML">HTML<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTTP/" title="HTTP">HTTP<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>36</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NodeJs/" title="NodeJs">NodeJs<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/SSH/" title="SSH">SSH<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/jQuery/" title="jQuery">jQuery<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/搭建部署/" title="搭建部署">搭建部署<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/正则表达式/" title="正则表达式">正则表达式<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/综合/" title="综合">综合<sup>8</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/学习笔记/" title="学习笔记">学习笔记<sup>102</sup></a></li>
			
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>49</sup></a></li>
			
		
			
				<li><a href="/tags/HTTP/" title="HTTP">HTTP<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/AngularJs/" title="AngularJs">AngularJs<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/算法-leetcode/" title="算法/leetcode">算法/leetcode<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/浏览器/" title="浏览器">浏览器<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/jQuery/" title="jQuery">jQuery<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/搭建部署/" title="搭建部署">搭建部署<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/FE/" title="FE">FE<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/HTML/" title="HTML">HTML<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/转载/" title="转载">转载<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/正则/" title="正则">正则<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/版本控制/" title="版本控制">版本控制<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/闭包/" title="闭包">闭包<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/NodeJs/" title="NodeJs">NodeJs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/内存泄漏/" title="内存泄漏">内存泄漏<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/前端包管理工具/" title="前端包管理工具">前端包管理工具<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Cookie/" title="Cookie">Cookie<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/LAMP/" title="LAMP">LAMP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/持续集成CI/" title="持续集成CI">持续集成CI<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/前端自动构建/" title="前端自动构建">前端自动构建<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/RestfulAPI/" title="RestfulAPI">RestfulAPI<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Session/" title="Session">Session<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/token/" title="token">token<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://bbs.byr.cn" target="_blank" title="">北邮人论坛-北邮人的温馨家园</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.ebupt.com" target="_blank" title="东信北邮信息技术有限公司">东信北邮信息技术有限公司</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=2180985772&verifier=e539de77&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Gao Chang in BUPT. <br/>
			The relentless pursuit of perfection.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2180985772" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/gcidea" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.linkedin.com/in/gcidea" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		<a href="http://www.zhihu.com/people/gcidea" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:gaochang@ebupt.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Gao Chang">Gao Chang</a>
		
		
		</p>
    
    
    <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','t_xFiUzPf_dy2au4WGJx','2.0.0');
</script>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  /*$this.append(html);*/

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ad03ecfd99432fefa83cbc4dea96fac4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
