
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>使用WebStorm创建webpack工作流的前端项目 | GCidea&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Gao Chang">
    

    
    <meta name="description" content="前言　　webpack是一款极为灵活的前端模块打包构建工具。其诞生和流行主要是由于以下这几个发展趋势：

为了完成更加复杂的交互逻辑，一个网页中使用的js代码数量越来越多；
即便有了更多代码，却要求使用中有更少的整页面重新加载；
现代浏览器提供了更多的API接口。

　　基于这样的情况，大量代码就需要能够被良好地管理起来，像webpack这样的模块系统就为我们将代码切分为若干模块提供了很好的选择。">
<meta property="og:type" content="article">
<meta property="og:title" content="使用WebStorm创建webpack工作流的前端项目">
<meta property="og:url" content="http://yoursite.com/2016/10/03/webpack-demos/index.html">
<meta property="og:site_name" content="GCidea's blog">
<meta property="og:description" content="前言　　webpack是一款极为灵活的前端模块打包构建工具。其诞生和流行主要是由于以下这几个发展趋势：

为了完成更加复杂的交互逻辑，一个网页中使用的js代码数量越来越多；
即便有了更多代码，却要求使用中有更少的整页面重新加载；
现代浏览器提供了更多的API接口。

　　基于这样的情况，大量代码就需要能够被良好地管理起来，像webpack这样的模块系统就为我们将代码切分为若干模块提供了很好的选择。">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-2.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-3.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-4.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-5.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-6.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-7.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-8.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-9.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-10.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-11.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-12.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-13.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-14.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-15.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-16.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-17.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-18.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-19.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-20.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-21.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-22.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-23.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-24.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-25.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-26.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-27.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-28.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-29.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-30.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-31.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-32.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-33.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-34.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-35.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-36.png">
<meta property="og:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-37.png">
<meta property="og:updated_time" content="2016-10-18T08:46:52.547Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用WebStorm创建webpack工作流的前端项目">
<meta name="twitter:description" content="前言　　webpack是一款极为灵活的前端模块打包构建工具。其诞生和流行主要是由于以下这几个发展趋势：

为了完成更加复杂的交互逻辑，一个网页中使用的js代码数量越来越多；
即便有了更多代码，却要求使用中有更少的整页面重新加载；
现代浏览器提供了更多的API接口。

　　基于这样的情况，大量代码就需要能够被良好地管理起来，像webpack这样的模块系统就为我们将代码切分为若干模块提供了很好的选择。">
<meta name="twitter:image" content="http://7xrz3r.com1.z0.glb.clouddn.com/webpack.png">

    
    
    <link rel="icon" href="/img/author.png">
    
    
    <link rel="apple-touch-icon" href="/img/author.png">
    <link rel="apple-touch-icon-precomposed" href="/img/author.png">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/author.png" alt="GCidea&#39;s blog" title="GCidea&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="GCidea&#39;s blog">GCidea&#39;s blog</a></h1>
				<h2 class="blog-motto">gaochang | BUPT</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页 | Home</a></li>
					
						<li><a href="/archives">归档 | Archives</a></li>
					
						<li><a href="/categories">分类 | Categories</a></li>
					
						<li><a href="/about">简介 | About</a></li>
					
					<!--<li>
 					

					
					</li>-->
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/03/webpack-demos/" title="使用WebStorm创建webpack工作流的前端项目" itemprop="url">使用WebStorm创建webpack工作流的前端项目</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Gao Chang" target="_blank" itemprop="author">Gao Chang</a>
		
  <p class="article-time">
    <time datetime="2016-10-03T14:15:18.000Z" itemprop="datePublished"> 发表于 2016-10-03</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS模块化编程相关背景"><span class="toc-number">2.</span> <span class="toc-text">JS模块化编程相关背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是webpack？"><span class="toc-number">3.</span> <span class="toc-text">什么是webpack？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack的安装"><span class="toc-number">4.</span> <span class="toc-text">webpack的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack的使用"><span class="toc-number">5.</span> <span class="toc-text">webpack的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单示例"><span class="toc-number">5.1.</span> <span class="toc-text">简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#规范使用"><span class="toc-number">5.2.</span> <span class="toc-text">规范使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#项目结构"><span class="toc-number">5.2.1.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件配置"><span class="toc-number">5.2.2.</span> <span class="toc-text">文件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用loaders"><span class="toc-number">5.2.3.</span> <span class="toc-text">使用loaders</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装其他可能需要的库"><span class="toc-number">5.2.4.</span> <span class="toc-text">安装其他可能需要的库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改app-js文件（ES6语法-jquery库）"><span class="toc-number">5.2.5.</span> <span class="toc-text">修改app.js文件（ES6语法+jquery库）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编辑index-html文件"><span class="toc-number">5.2.6.</span> <span class="toc-text">编辑index.html文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重新打包"><span class="toc-number">5.2.7.</span> <span class="toc-text">重新打包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#访问index-html"><span class="toc-number">5.2.8.</span> <span class="toc-text">访问index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用plugins"><span class="toc-number">5.2.9.</span> <span class="toc-text">使用plugins</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack中的重要工具：webpack-dev-server"><span class="toc-number">6.</span> <span class="toc-text">webpack中的重要工具：webpack-dev-server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装webpack-dev-server"><span class="toc-number">6.1.</span> <span class="toc-text">安装webpack-dev-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动webpack-dev-server"><span class="toc-number">6.2.</span> <span class="toc-text">启动webpack-dev-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指定content-base"><span class="toc-number">6.3.</span> <span class="toc-text">指定content base</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动刷新"><span class="toc-number">6.4.</span> <span class="toc-text">自动刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iframe模式"><span class="toc-number">6.4.1.</span> <span class="toc-text">iframe模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#inline模式"><span class="toc-number">6.4.2.</span> <span class="toc-text">inline模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块热替换-Hot-Module-Replacement-的应用"><span class="toc-number">7.</span> <span class="toc-text">模块热替换 Hot Module Replacement 的应用</span></a></li></ol>
		
		</div>
		
		<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>　　webpack是一款极为灵活的前端模块打包构建工具。其诞生和流行主要是由于以下这几个发展趋势：</p>
<ul>
<li>为了完成更加复杂的交互逻辑，一个网页中使用的js代码数量越来越多；</li>
<li>即便有了更多代码，却要求使用中有更少的整页面重新加载；</li>
<li>现代浏览器提供了更多的API接口。</li>
</ul>
<p>　　基于这样的情况，大量代码就需要能够被良好地管理起来，像webpack这样的模块系统就为我们将代码切分为若干模块提供了很好的选择。本篇在webstorm编辑器中构建了一个最简单的使用webpack管理的前端项目，算是对webpack使用的入门探究。</p>
<hr>
<h2 id="JS模块化编程相关背景"><a href="#JS模块化编程相关背景" class="headerlink" title="JS模块化编程相关背景"></a>JS模块化编程相关背景</h2><p>　　在前端开发中有很多定义模块依赖的方法：</p>
<ul>
<li>在html页面中使用<code>&lt;script&gt;</code>标签手动引入（这并没有使用模块管理系统）<br>　　在这种方式下，各模块是将接口暴露给了全局对象，比如window。常见问题：</li>
</ul>
<ol>
<li>全局对象中的命名变量冲突</li>
<li>各js文件加载顺序十分重要，一旦A依赖B而A又在B之前引入，则会报错</li>
<li>需要开发者自己来维护和解决依赖的问题</li>
<li>在大型项目中可能需要引入数十个js文件，代码冗长，难于管理</li>
</ol>
<ul>
<li>编写符合CommonJS规范的代码<br>　　这种规范使用同步的<code>require</code>方法加载依赖，并返回一个暴露出的接口，一个模块可以通过给<code>export</code>对象指定属性的方式来指定输出：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require(&quot;module&quot;);</span><br><span class="line">require(&quot;../file.js&quot;);</span><br><span class="line">exports.doStuff = function() &#123;&#125;;</span><br><span class="line">module.exports = someValue;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>　　这种方式主要用在服务端，比如Node.js。</p>
<ul>
<li><p>编写符合AMD规范的代码<br>　　这种规范使用异步的<code>require</code>方法加载依赖，主要适用于客户端，因为在客户端如果同步加载的话会阻塞页面渲染等其他内容的进行，造成假死。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require([&quot;module&quot;, &quot;../file&quot;], function(module, file) &#123; /* ... */ &#125;);</span><br><span class="line">define(&quot;mymodule&quot;, [&quot;dep1&quot;, &quot;dep2&quot;], function(d1, d2) &#123;</span><br><span class="line">  return someExportedValue;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用ES6标准原生模块<br>　　ECMAScript 2015 (6th Edition)给javascript语言增加了新的内容-import关键字，从而构成了另一个模块系统</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &quot;jquery&quot;;</span><br><span class="line">export function doStuff() &#123;&#125;</span><br><span class="line">module &quot;localModule&quot; &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="什么是webpack？"><a href="#什么是webpack？" class="headerlink" title="什么是webpack？"></a>什么是webpack？</h2><p>一句话来概括：webpack能够将相互依赖的模块进行打包，并生成代表着这些模块的静态文件。<br>官网上给出的示意图如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack.png" alt=""></p>
<p>　　市面上已经存在的模块管理和打包工具并不适合大型的项目，尤其单页面Web应用程序。最紧迫的原因是如何在一个大规模的代码库中，维护各种模块资源的分割和存放，维护它们之间的依赖关系，并且无缝的将它们整合到一起生成适合浏览器端请求加载的静态资源。这些已有的模块化工具并不能很好的完成如下的目标：</p>
<ul>
<li>将依赖树拆分成按需加载的块</li>
<li>初始化加载的耗时尽量少</li>
<li>各种静态资源都可以视作模块</li>
<li>将第三方库整合成模块的能力</li>
<li>可以自定义打包逻辑的能力</li>
<li>适合大项目，无论是单页还是多页的Web应用</li>
</ul>
<p>webpack有以下明显特点：</p>
<ol>
<li>代码拆分<br>　　Webpack 有两种组织模块依赖的方式，同步和异步。异步依赖作为分割点，形成一个新的块。在优化了依赖树后，每一个异步区块都作为一个文件被打包。</li>
<li>Loader<br>　　Webpack 本身只能处理原生的 JavaScript 模块，但是 loader 转换器可以将各种类型的资源转换成 JavaScript 模块。这样，任何资源都可以成为 Webpack 可以处理的模块。</li>
<li>智能解析<br>　　Webpack 有一个智能解析器，几乎可以处理任何第三方库，无论它们的模块形式是 CommonJS、 AMD 还是普通的 JS 文件。甚至在加载依赖的时候，允许使用动态表达式 require(“./templates/“ + name + “.jade”)。</li>
<li>插件系统<br>　　Webpack 还有一个功能丰富的插件系统。大多数内容功能都是基于这个插件系统运行的，还可以开发和使用开源的 Webpack 插件，来满足各式各样的需求。</li>
<li>快速运行<br>　　Webpack 使用异步 I/O 和多级缓存提高运行效率，这使得 Webpack 能够以令人难以置信的速度快速增量编译。</li>
</ol>
<hr>
<h2 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h2><p>1.安装Node.js<br>　　关于Node.js的安装有很多参考，在之前的文章<a href="http://localhost:4000/2016/03/16/2016-03-16-my-first-blog/#安装Node-js" target="_blank" rel="external">【首篇】记录本博客www.gcidea.info的搭建过程</a>也有提及。</p>
<p>2.安装webpack<br>2.1 打开webstorm，创建一个新文件夹webpack-usage作为根目录，后续所有操作都在该项目中完成：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-2.png" alt=""></p>
<p>2.2 Node.js安装完成后，会同时安装npm这个Node.js的包管理工具。我们使用这个工具全局安装webpack。打开Terminal窗口输入如下命令：<br><code>$ npm install webpack -g</code><br>可以看到安装过程正在进行：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-3.png" alt=""></p>
<p>完成后，显示信息如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-4.png" alt=""></p>
<p>3.在项目中添加webpack<br>　　根据最佳实践，最好也在具体的项目中添加webpack。这样的话你可以任意指定在该项目中使用的webpack版本，而不至于局限于使用全局的唯一版本。<br>3.1 为此，通过命令在项目根目录下创建package.json文件，将项目通过npm管理起来：<br><code>npm init</code><br>这个过程中需要填写一些信息，最终会写入package.json：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-5.png" alt=""></p>
<p>之后，项目根目录下多了一个文件，正是package.json：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-6.png" alt=""></p>
<p>3.2 此时，再通过如下命令安装webpack，其中<code>--save-dev</code>表示会将webpack添加到package.json的devDependencies中：<br><code>npm install webpack --save-dev</code></p>
<p>并且，该命令会自动检查安装webpack所需的全部依赖，执行该命令后，项目有3处变化：控制台打印出依赖结构树；根目录下生成node_modules文件夹用于存放所有依赖包；package.json中多出一个devDependencies属性。如下图所示：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-7.png" alt=""></p>
<p>4.安装webpack-dev-server<br>　　这是一个Node.js Express server，可以帮我们在本地建立一个服务器。此处仅安装，具体使用在下文描述。<br><code>npm install webpack-dev-server --save-dev</code></p>
<p>可以预想，现在package.json文件的依赖项已经变为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;webpack&quot;: &quot;^1.13.2&quot;,</span><br><span class="line">    &quot;webpack-dev-server&quot;: &quot;^1.16.2&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="webpack的使用"><a href="#webpack的使用" class="headerlink" title="webpack的使用"></a>webpack的使用</h2><h3 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h3><p>1.新建cats.js文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var cats = [&apos;dave&apos;, &apos;henry&apos;, &apos;martha&apos;];</span><br><span class="line">module.exports = cats;</span><br></pre></td></tr></table></figure></p>
<p>2.新建app.js文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cats = require(&apos;./cats.js&apos;);</span><br><span class="line">console.log(cats);</span><br></pre></td></tr></table></figure></p>
<p>3.使用webpack命令进行打包<br><code>webpack ./app.js app.bundle.js</code><br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-8.png" alt=""></p>
<p>结果如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-9.png" alt=""></p>
<p>可以发现webpack已经帮我们将两个文件合并在一起并加入很多其他内容，这个过程在官方上详细描述如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-10.png" alt=""></p>
<p>现在，假如我们要将项目部署上线，那么只需要打包后的静态文件即可，实验如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-11.png" alt=""></p>
<p>可以看出，在node环境下执行打包文件，可以正常输出源文件的执行结果。</p>
<hr>
<h3 id="规范使用"><a href="#规范使用" class="headerlink" title="规范使用"></a>规范使用</h3><hr>
<h4 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h4><p>　　现在我们已经具备基本的webpack环境且大致了解了webpack的打包使用。为了规范使用，删除app.bundle.js,app.js,cat.js,重新规定项目目录结构如下：</p>
<ul>
<li>src：存放源码</li>
<li>build: 打包后静态文件目录</li>
<li>node_modules: node模块依赖目录</li>
<li>webpack.config.js：webpack配置目录–使用命令行携带参数的方式不便于扩展，统一用此文件管理</li>
<li>index.html: 项目入口页面</li>
</ul>
<p>修改后的项目结构如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-12.png" alt=""></p>
<hr>
<h4 id="文件配置"><a href="#文件配置" class="headerlink" title="文件配置"></a>文件配置</h4><p><strong>配置webpack.config.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &apos;./src/app.js&apos;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: &apos;./build&apos;,</span><br><span class="line">        filename: &apos;app.bundle.js&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p> 　　以上简单的配置表示指定webpack打包入口为./src/app.js文件，打包结果为app.bundle.js，在./build目录下。</p>
<p> 　　该文件还有很多配置项，详见：<a href="http://webpack.github.io/docs/configuration.html" target="_blank" rel="external">http://webpack.github.io/docs/configuration.html</a></p>
<p> 现在，只需要简单的命令<code>webpack</code>而不需要参数，就可以执行打包。</p>
<hr>
<h4 id="使用loaders"><a href="#使用loaders" class="headerlink" title="使用loaders"></a>使用loaders</h4><p> 　　webpack只能对原生javascript文件打包，但是通过各种强大的loaders，我们可以处理各种类型的文件。Loader 可以理解为是模块和资源的转换器，它本身是一个函数，接受源文件作为参数，返回转换的结果。这样，我们就可以通过 require 来加载任何类型的模块或文件，比如 CoffeeScript、 JSX、 LESS 或图片。<br> 　　loaders具备以下特性：</p>
<ul>
<li>Loader 可以通过管道方式链式调用，每个 loader 可以把资源转换成任意格式并传递给下一个<br>loader ，但是最后一个 loader 必须返回 JavaScript。</li>
<li>Loader 可以同步或异步执行。</li>
<li>Loader 运行在 node.js 环境中，所以可以做任何可能的事情。</li>
<li>Loader 可以接受参数，以此来传递配置项给 loader。</li>
<li>Loader 可以通过文件扩展名（或正则表达式）绑定给不同类型的文件。</li>
<li>Loader 可以通过 npm 发布和安装。</li>
</ul>
<p>　　为了使浏览器能够解析，使用ES6语法编写的代码需要使用babel进行转码，为此我们安装babel-loader。<br>1.安装Babel 和 presets<br><code>npm install --save-dev babel-core babel-preset-es2015</code><br>2.安装babel-loader<br><code>npm install --save-dev babel-loader</code><br>3.在根目录创建Babel配置文件—.babelrc<br>内容为： <code>{ &quot;presets&quot;: [ &quot;es2015&quot; ] }</code><br>4.修改webpack.config.js如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &apos;./src/app.js&apos;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: &apos;./build&apos;,</span><br><span class="line">        filename: &apos;app.bundle.js&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [&#123;</span><br><span class="line">            test: /\.js$/,</span><br><span class="line">            exclude: /node_modules/,</span><br><span class="line">            loader: &apos;babel-loader&apos;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="安装其他可能需要的库"><a href="#安装其他可能需要的库" class="headerlink" title="安装其他可能需要的库"></a>安装其他可能需要的库</h4><p> <code>npm install --save jquery babel-polyfill</code></p>
<blockquote>
<p><code>--save</code>而非<code>--save-dev</code>表示库将会在运行环境使用<br><code>--save-dev</code>的内容将会放在package.json 的devDependencies<br>而<code>--save</code>会放在dependencies里面<br>产品模式用dependencies，开发模式用devDependencies<br>因此将会实际运行在用户端浏览器环境中的库就要采用<code>--save</code>安装<br>通过使用babel-polyfill可以让老版本浏览器能够使用ES6新提供的API</p>
</blockquote>
<hr>
<h4 id="修改app-js文件（ES6语法-jquery库）"><a href="#修改app-js文件（ES6语法-jquery库）" class="headerlink" title="修改app.js文件（ES6语法+jquery库）"></a>修改app.js文件（ES6语法+jquery库）</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &apos;babel-polyfill&apos;;</span><br><span class="line">import cats from &apos;./cats&apos;;</span><br><span class="line">import $ from &apos;jquery&apos;;</span><br><span class="line"></span><br><span class="line">$(&apos;&lt;h1&gt;Cats&lt;/h1&gt;&apos;).appendTo(&apos;body&apos;);</span><br><span class="line">const ul = $(&apos;&lt;ul&gt;&lt;/ul&gt;&apos;).appendTo(&apos;body&apos;);</span><br><span class="line">for (const cat of cats) &#123;</span><br><span class="line">    $(&apos;&lt;li&gt;&lt;/li&gt;&apos;).text(cat).appendTo(ul);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>将以上代码写入后，编辑器会报错：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-13.png" alt=""></p>
<p>原因是编辑器未能识别ES6语法，在webstorm的settings中做如下配置即可：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-14.png" alt=""></p>
</blockquote>
<hr>
<h4 id="编辑index-html文件"><a href="#编辑index-html文件" class="headerlink" title="编辑index.html文件"></a>编辑index.html文件</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script src=&quot;build/app.bundle.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="重新打包"><a href="#重新打包" class="headerlink" title="重新打包"></a>重新打包</h4><p> <code>webpack</code></p>
<hr>
<h4 id="访问index-html"><a href="#访问index-html" class="headerlink" title="访问index.html"></a>访问index.html</h4><p>可以看到正确结果<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-15.png" alt=""></p>
<hr>
<h4 id="使用plugins"><a href="#使用plugins" class="headerlink" title="使用plugins"></a>使用plugins</h4><p>　　在打包的工作流中可能还会有一些其他的操作，会使用到不同的插件plugins，比较典型的就是uglify plugin这个压缩工具。为此，在webpack.config.js中增加配置项plugins：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&apos;webpack&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &apos;./src/app.js&apos;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: &apos;./build&apos;,</span><br><span class="line">        filename: &apos;app.bundle.js&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [&#123;</span><br><span class="line">            test: /\.js$/,</span><br><span class="line">            exclude: /node_modules/,</span><br><span class="line">            loader: &apos;babel-loader&apos;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">            compress: &#123;</span><br><span class="line">                warnings: false,</span><br><span class="line">            &#125;,</span><br><span class="line">            output: &#123;</span><br><span class="line">                comments: false,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在执行命令<code>webpack</code>重新打包之前，我们先看看app.bundle.js的文件大小,为523KB：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-16.png" alt=""></p>
<p>现在执行命令<code>webpack</code>重新打包，再看app.bundle.js的文件大小,为171KB：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-17.png" alt=""></p>
<p>可以看到，压缩工具去掉了无用的空字符等：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-18.png" alt=""></p>
<hr>
<h2 id="webpack中的重要工具：webpack-dev-server"><a href="#webpack中的重要工具：webpack-dev-server" class="headerlink" title="webpack中的重要工具：webpack-dev-server"></a>webpack中的重要工具：webpack-dev-server</h2><p>　　webpack-dev-server本质上是一个小型的Node.js的Express服务器，使用webpack-dev-middleware作为中间件来支持webpack打包。</p>
<h3 id="安装webpack-dev-server"><a href="#安装webpack-dev-server" class="headerlink" title="安装webpack-dev-server"></a>安装webpack-dev-server</h3><p><code>npm install webpack-dev-server</code><br>package.json变为如下形式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;webpack-usage&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;webpack-usage-demo&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;gaochang&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;babel-core&quot;: &quot;^6.17.0&quot;,</span><br><span class="line">    &quot;babel-loader&quot;: &quot;^6.2.5&quot;,</span><br><span class="line">    &quot;babel-preset-es2015&quot;: &quot;^6.16.0&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^1.13.2&quot;,</span><br><span class="line">    &quot;webpack-dev-server&quot;: &quot;^1.16.2&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;babel-polyfill&quot;: &quot;^6.16.0&quot;,</span><br><span class="line">    &quot;jquery&quot;: &quot;^3.1.1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="启动webpack-dev-server"><a href="#启动webpack-dev-server" class="headerlink" title="启动webpack-dev-server"></a>启动webpack-dev-server</h3><p>　　安装完成后，在不指定任何参数的情况下，可以直接通过命令<code>webpack-dev-server</code>在本地8080端口运行一个服务器，访问<code>http://localhost:8080</code>可以看到效果：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-19.png" alt=""></p>
<p>访问<code>http://localhost:8080/webpack-dev-server/</code> 可以显示webpack服务器状态条<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-20.png" alt=""></p>
<h3 id="指定content-base"><a href="#指定content-base" class="headerlink" title="指定content base"></a>指定content base</h3><p>webpack-dev-server默认监控的是当前目录的文件，除非声明一个特殊的基本路径：<br><code>webpack-dev-server --content-base build/</code><br>这样的话，webpack就会只监控build文件夹下的静态文件。当你的文件在任何时候发生变化时，都会触发重新编译打包。验证如下：<br>1.使用上述命令启动server：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-21.png" alt=""></p>
<p>控制台会显示打包过程日志，并最终提示打包完成已经可用：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-22.png" alt=""></p>
<p>2.此时，访问<code>http://localhost:8080/webpack-dev-server/</code>可看到：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-23.png" alt=""></p>
<p>即显示了build目录下的文件列表，此时只有app.bundle.js，点开内容如下：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-24.png" alt=""></p>
<p>红色框中是我们app.js中的部分源码。</p>
<p>3.现在修改上述部分源码，观察控制台日志和<code>http://localhost:8080/webpack-dev-server/</code>目录下文件变化。<br>修改<code>&lt;h1&gt;</code>内容后，发现控制台日志在之前“bundle is now VALID”的基础上，自动开始重新编译，进入“bundle is now INVALID”的状态：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-25.png" alt=""></p>
<p>同时，看到页面状态条变为：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-26.png" alt=""></p>
<p>等待重编译完成后，发现页面文件内容确实变为我们修改后的内容：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-27.png" alt=""></p>
<p>但是，<strong>值得注意的是，这个修改的内容是保存在内存中的</strong>，并没有写入我们在webpack.config.js的output中指定的文件：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-28.png" alt=""></p>
<p>发现文件还是修改之前的内容。也就是说，当相同URL下已经有一个打包的文件时，默认情况下内存中的文件享有优先权。<strong>而如果想要让build目录下的输出文件的内容也跟随发生变化，则要使用<code>webpack</code>命令重新打包</strong>。</p>
<hr>
<p>除了以上分析，还有一点要注意，通过给webpack.config.js的output指定publicPath，可以定制浏览器中的项目访问路径。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    path: &apos;./build&apos;,</span><br><span class="line">    publicPath: &quot;/assets/&quot;,</span><br><span class="line">    filename: &apos;app.bundle.js&apos;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>重新打包，可以在如下路径访问相应文件：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-29.png" alt=""></p>
<p>由于之前content-base指定了监控build目录，我们<strong>在该目录下</strong>创建一个index.html文件，用来加载并使用我们打包好的js文件，而原先在项目根目录webpack-usage下创建的index.html文件就不起作用了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;p&gt;在build目录下创建的index.html文件&lt;/p&gt;</span><br><span class="line">  &lt;script src=&quot;assets/app.bundle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>访问<code>http://localhost:8080/</code>：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-30.png" alt=""></p>
<p>访问<code>http://localhost:8080/webpack-dev-server</code>:<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-31.png" alt=""></p>
<p>其中，第一个是打包文件app.bundle.js本身：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-32.png" alt=""><br>注意路径为<code>http://localhost:8080/assets/app.bundle.js</code>，符合publicPath的配置。</p>
<p>第二个是根据打包文件生成的html文件，注意路径为<code>http://localhost:8080/assets/app.bundle</code>，符合publicPath的配置<br>点击“app.bundle”:<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-33.png" alt=""></p>
<p>点击“webpack-dev-server”:<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-34.png" alt=""><br>（<font color="red">该html文件仅针对app.bundle.js，和直接访问<code>http://localhost:8080/</code>对应的index.html并不相同，以上两图中没有“在build目录下创建的index.html文件”这句话就说明了这一点。</font>）</p>
<blockquote>
<p>关于js文件引入的路径，经测试发现以下几种情况，应该与webpack的文件查找算法有关，具体待进一步探究：</p>
<p>1.<code>src=&quot;assets/app.bundle.js&quot;</code> 由于publicPath指定了”/assets/“，因此这种方式肯定能找到app.bundle.js文件；</p>
<p>2.<code>src=&quot;app.bundle.js&quot;</code> 默认在build目录下找该文件，能找到</p>
<p>3.<code>src=&quot;/app.bundle.js&quot;</code> 默认在build目录下找该文件，能找到</p>
<p>4.<code>src=&quot;./app.bundle.js&quot;</code> 默认在build目录下找该文件，能找到</p>
<p>5.<code>src=&quot;../app.bundle.js&quot;</code> 默认在build目录下找该文件，能找到</p>
</blockquote>
<hr>
<h3 id="自动刷新"><a href="#自动刷新" class="headerlink" title="自动刷新"></a>自动刷新</h3><p>　　webpack-dev-server支持两种自动刷新页面的方式。并且两种方式都支持模块热替换。</p>
<h4 id="iframe模式"><a href="#iframe模式" class="headerlink" title="iframe模式"></a>iframe模式</h4><p>　　在这种方式下，页面实际上是被嵌入了一个iframe，使用这种方式不需要额外配置，只要js文件以改变，就会自动”recompiling”。直接访问<code>http://«host»:«port»/webpack-dev-server/«path»</code>，在我们的配置中就是访问<code>http://localhost:8080/webpack-dev-server/index.html</code>。该方式的特点是：</p>
<ul>
<li>无需改变配置</li>
<li>编译信息通过页面顶部信息条体现</li>
<li>浏览器地址栏不会体现出地址的变化</li>
</ul>
<h4 id="inline模式"><a href="#inline模式" class="headerlink" title="inline模式"></a>inline模式</h4><p>　　在这种方式下，我们需要额外的配置，使用以下两种方式之一：</p>
<ul>
<li>在启动命令上加参数”–inline”:<br><code>webpack-dev-server --content-base build/ --inline</code></li>
<li>在webpack.config.js加上<code>devServer: { inline: true }</code></li>
</ul>
<p>　　使用这种方式不需要给URL加上/webpack-dev-server/，直接访问<code>http://«host»:«port»/«path»</code>，在我们的配置中就是访问<code>http://localhost:8080/index.html</code></p>
<p>该方式的特点是：</p>
<ul>
<li>需要改变配置</li>
<li>编译信息通过浏览器的console体现：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-35.png" alt=""></li>
<li>浏览器地址栏会体现出地址的变化</li>
</ul>
<hr>
<h2 id="模块热替换-Hot-Module-Replacement-的应用"><a href="#模块热替换-Hot-Module-Replacement-的应用" class="headerlink" title="模块热替换 Hot Module Replacement 的应用"></a>模块热替换 Hot Module Replacement 的应用</h2><p>　　在webpack-dev-server中使用模块热替换 Hot Module Replacement最简单的办法就是在inline模式中使用。我们只需要在参数中加上”–hot”即可。<br><code>webpack-dev-server --content-base build/ --inline --hot</code></p>
<p><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-36.png" alt=""></p>
<p>这样，就进入了监听状态，当文件发生修改，看到console打出如下日志：<br><img src="http://7xrz3r.com1.z0.glb.clouddn.com/webpack-37.png" alt=""></p>
<p>发现提示错误，热替换失败，整个页面进行了重载：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[HMR] Cannot apply update. Need to do a full reload!</span><br><span class="line">[HMR] Error: Aborted because 77 is not accepted</span><br><span class="line">    at l (http://localhost:8080/assets/app.bundle.js:1:4169)</span><br><span class="line">    at f (http://localhost:8080/assets/app.bundle.js:1:3117)</span><br><span class="line">    at u (http://localhost:8080/assets/app.bundle.js:1:3017)</span><br><span class="line">    at webpackHotUpdate (http://localhost:8080/assets/app.bundle.js:1:5790)</span><br><span class="line">    at http://localhost:8080/assets/0.ae586ae503d4fe64ca9a.hot-update.js:1:1</span><br></pre></td></tr></table></figure></p>
<p>查阅了很多资料，如<a href="https://github.com/webpack/webpack-dev-server/issues/395" target="_blank" rel="external">https://github.com/webpack/webpack-dev-server/issues/395</a>，但并没有找到准确原因，暂时搁置。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/前端工程化/">前端工程化</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/前端工程化/">前端工程化</a><a href="/tags/webpack/">webpack</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/10/03/webpack-demos/" data-title="使用WebStorm创建webpack工作流的前端项目 | GCidea&#39;s blog" data-tsina="2180985772" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/10/05/bag-queue-stack/" title="使用数组和链表实现背包、队列、栈3种集合类数据结构">
  <strong>上一篇：</strong><br/>
  <span>
  使用数组和链表实现背包、队列、栈3种集合类数据结构</span>
</a>
</div>


<div class="next">
<a href="/2016/10/02/js-closure-3/"  title="JavaScript的闭包案例3---关于闭包的深入理解">
 <strong>下一篇：</strong><br/> 
 <span>JavaScript的闭包案例3---关于闭包的深入理解
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/10/03/webpack-demos/" data-title="使用WebStorm创建webpack工作流的前端项目" data-url="http://yoursite.com/2016/10/03/webpack-demos/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS模块化编程相关背景"><span class="toc-number">2.</span> <span class="toc-text">JS模块化编程相关背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是webpack？"><span class="toc-number">3.</span> <span class="toc-text">什么是webpack？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack的安装"><span class="toc-number">4.</span> <span class="toc-text">webpack的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack的使用"><span class="toc-number">5.</span> <span class="toc-text">webpack的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单示例"><span class="toc-number">5.1.</span> <span class="toc-text">简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#规范使用"><span class="toc-number">5.2.</span> <span class="toc-text">规范使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#项目结构"><span class="toc-number">5.2.1.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件配置"><span class="toc-number">5.2.2.</span> <span class="toc-text">文件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用loaders"><span class="toc-number">5.2.3.</span> <span class="toc-text">使用loaders</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装其他可能需要的库"><span class="toc-number">5.2.4.</span> <span class="toc-text">安装其他可能需要的库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改app-js文件（ES6语法-jquery库）"><span class="toc-number">5.2.5.</span> <span class="toc-text">修改app.js文件（ES6语法+jquery库）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编辑index-html文件"><span class="toc-number">5.2.6.</span> <span class="toc-text">编辑index.html文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重新打包"><span class="toc-number">5.2.7.</span> <span class="toc-text">重新打包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#访问index-html"><span class="toc-number">5.2.8.</span> <span class="toc-text">访问index.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用plugins"><span class="toc-number">5.2.9.</span> <span class="toc-text">使用plugins</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack中的重要工具：webpack-dev-server"><span class="toc-number">6.</span> <span class="toc-text">webpack中的重要工具：webpack-dev-server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装webpack-dev-server"><span class="toc-number">6.1.</span> <span class="toc-text">安装webpack-dev-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动webpack-dev-server"><span class="toc-number">6.2.</span> <span class="toc-text">启动webpack-dev-server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指定content-base"><span class="toc-number">6.3.</span> <span class="toc-text">指定content base</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动刷新"><span class="toc-number">6.4.</span> <span class="toc-text">自动刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iframe模式"><span class="toc-number">6.4.1.</span> <span class="toc-text">iframe模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#inline模式"><span class="toc-number">6.4.2.</span> <span class="toc-text">inline模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块热替换-Hot-Module-Replacement-的应用"><span class="toc-number">7.</span> <span class="toc-text">模块热替换 Hot Module Replacement 的应用</span></a></li></ol>
 
  </div>

<div id="asidepart">
<!--<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>-->
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="gcidea" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/AngularJs/" title="AngularJs">AngularJs<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/CSS-CSS3/" title="CSS/CSS3">CSS/CSS3<sup>13</sup></a></li>
		  
		
		  
			<li><a href="/categories/FE综合/" title="FE综合">FE综合<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTML-HTML5/" title="HTML/HTML5">HTML/HTML5<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTTP/" title="HTTP">HTTP<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>39</sup></a></li>
		  
		
		  
			<li><a href="/categories/NodeJs/" title="NodeJs">NodeJs<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/React/" title="React">React<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/SSH/" title="SSH">SSH<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/jQuery/" title="jQuery">jQuery<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端工程化/" title="前端工程化">前端工程化<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/搭建部署/" title="搭建部署">搭建部署<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/正则表达式/" title="正则表达式">正则表达式<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>48</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/学习笔记/" title="学习笔记">学习笔记<sup>109</sup></a></li>
			
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>55</sup></a></li>
			
		
			
				<li><a href="/tags/leetcode/" title="leetcode">leetcode<sup>47</sup></a></li>
			
		
			
				<li><a href="/tags/实现-应用/" title="实现/应用">实现/应用<sup>20</sup></a></li>
			
		
			
				<li><a href="/tags/HTTP/" title="HTTP">HTTP<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/前端框架/" title="前端框架">前端框架<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/MVVM/" title="MVVM">MVVM<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/AngularJs/" title="AngularJs">AngularJs<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/搭建部署/" title="搭建部署">搭建部署<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/浏览器/" title="浏览器">浏览器<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/jQuery/" title="jQuery">jQuery<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/HTML/" title="HTML">HTML<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/FE/" title="FE">FE<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/编码/" title="编码">编码<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/兼容性/" title="兼容性">兼容性<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/React/" title="React">React<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/闭包/" title="闭包">闭包<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/转载/" title="转载">转载<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/前端工程化/" title="前端工程化">前端工程化<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/页面渲染/" title="页面渲染">页面渲染<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/异步编程/" title="异步编程">异步编程<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/webpack/" title="webpack">webpack<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/NodeJs/" title="NodeJs">NodeJs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/正则/" title="正则">正则<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/可视化拖拽/" title="可视化拖拽">可视化拖拽<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/版本控制/" title="版本控制">版本控制<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/前端自动构建/" title="前端自动构建">前端自动构建<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/客户端存储/" title="客户端存储">客户端存储<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/持续集成CI/" title="持续集成CI">持续集成CI<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Emmet/" title="Emmet">Emmet<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/jqGrid/" title="jqGrid">jqGrid<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Cookie/" title="Cookie">Cookie<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/跨域/" title="跨域">跨域<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/LAMP/" title="LAMP">LAMP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/语义化/" title="语义化">语义化<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Less/" title="Less">Less<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Nginx/" title="Nginx">Nginx<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/内存泄漏/" title="内存泄漏">内存泄漏<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/RestfulAPI/" title="RestfulAPI">RestfulAPI<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Session/" title="Session">Session<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/token/" title="token">token<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/zTree/" title="zTree">zTree<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/前端包管理工具/" title="前端包管理工具">前端包管理工具<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://bbs.byr.cn" target="_blank" title="">北邮人论坛-北邮人的温馨家园</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.ebupt.com" target="_blank" title="东信北邮信息技术有限公司">东信北邮信息技术有限公司</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=2180985772&verifier=e539de77&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Gao Chang in BUPT. <br/>
			The relentless pursuit of perfection.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2180985772" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/gcidea" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.linkedin.com/in/gcidea" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		<a href="http://www.zhihu.com/people/gcidea" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:gaochang@ebupt.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Gao Chang">Gao Chang</a>
		
		
		</p>
    
    
    <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','t_xFiUzPf_dy2au4WGJx','2.0.0');
</script>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  /*$this.append(html);*/

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"gcidea"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ad03ecfd99432fefa83cbc4dea96fac4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
